+++
date = '2026-01-26T11:04:00+08:00'
draft = false
title = 'Proxyos Weekly 027'
slug = 'proxyos-weekly-027'
series = ['proxyos-weekly']
categories = ['ProxyOS', 'DevLog']
tags = ['ProxyOS', '周报', '独立游戏开发', '技术日志']

+++

> TL;DR 概览
>
> 第一章搞定了。接下来是第二章了

{{< toc >}}

# 本期目标

- [x] 完成第一章测试
  - [x] 第六节
  - [x] 过渡到第二章

# 进展速记（Changelog）

## 本期假设 / 预期

> 我当时以为世界是怎样的？
> 这个预期中，哪一条被证伪 / 被削弱 / 被确认？

TMD这已经是拖了三期了，再拖下去天理不容了！

把上期遗留的代码检视完，修掉明显的bug，把图用新的结构重新录一下，然后就赶紧把过渡段处理好。别TM给自己上强度了

过渡完之后如果还有时间，那就按照上期说的那样写个玩家操作手册过一下第二章的代码能力，然后根据结果安排下期计划

---

……又给自己上强度了，主要是检视的时候发现了不少可能给以后埋雷的实现缺陷，然后一个个修

之前过渡到第二章的脚本在新的布局模式下没法用了，换了新的逻辑

## 本期确定性变化

> 哪些东西现在「更确定」或「被明确否定」了？
> “确认 X 不可行”
> “删掉 Y 抽象”
> “意识到 Z 是伪问题”

### 新增：

- ANORA 新增了回放到特定关键帧的IPC命令
- 为啥我之前TMD把第六节的任务定义漏了……已添加
- 启动动画

### 变更：

- ANORA 的回放进度条现在再次平滑移动了
- ANORA 的复制粘贴机制现在更健壮了，必要时用户甚至可以用这个功能导出部分图
- ANORA 的边禁用机制得到了修正，被禁用的边会被视为存在但不会被用于传递数据
- 优化了第六节的文案，现在它对于新人来讲应该更好理解了
- 优化了节点架构，现在整体逻辑更加清晰且具有可扩展性

### 修复：

- ANORA 部分节点类型可能因为时序问题无法正常注册
- 第一章的等待用户确认机制可能会出现用户连按好几次Enter导致缓冲区中的Enter被后续多个等待确认依次消费，进而导致确认被跳过

### 删除：

- 

# 主要进展内容/本期关键判断点

> 我做出了哪些「如果错了也要付代价」的判断？

## 各种优化

ANORA 和主程序都做了不少零零碎碎的修补，虽然claude非常不错，但是因为上下文有限，有时候会实现出局部最优但整体可维护性不佳的代码。这也是我还没考虑转行的最重要原因

> 但说实话，claude如果真的能在功能演进的过程中始终保持整体可维护性，拿它自己就能优化自己了，那种情况下我转哪个行都没用了

总体来说，claude辅助编程目前经常出现的问题大致分为以下几类，同时也附上了我的解决方法

| 问题                                                 | 预防方法                                                     |
| ---------------------------------------------------- | ------------------------------------------------------------ |
| 没有读到所有代码，导致重复实现了某些功能             | 定期更新copilot-instructions.md                              |
| 因为不了解特定框架（如vue-flow），重复造了轮子       | 没辙，这个得靠人类经验，即“这个框架是不是大概率会提供类似功能” |
| 倾向于打补丁而非稍微麻烦的小范围重构，导致补丁摞补丁 | 先让它帮忙定位问题，然后人类给出解法，并询问其潜在的其他解法来避免遗漏，最后选最好的方案进行机制层面修改 |
| 倾向于使用最常见的逻辑而非最适合的逻辑               | 在涉及copilot-instructions.md没有提及的细节时，主动提醒关键指标（比如右键菜单功能需要可以通过mod扩展） |
| 不会主动处理同类问题                                 | 在检视其修正方案时，主动要求其检查其他同类问题。一般来说检视后不会有啥大问题，同类问题也在检视中解决了 |



## 边禁用机制

在使用ANORA的图编辑功能写第一章的逻辑图的那些日子里，我也在使用ComfyUI玩赛博抽卡。

ComfyUI默认提供的能力确实存在一些痛点，而ANORA也在对应着学习。

| ComfyUI 的使用痛点                                           | ANORA 对应的特性                                    |
| ------------------------------------------------------------ | --------------------------------------------------- |
| 连线方向不容易看出来                                         | 激活的连线上有沿着对应方向移动的标记                |
| 调试不便                                                     | 单步运行、迭代间延迟、执行到特定节点                |
| 本质上是顺序工作流，并不图灵完备<br/>不过在ComfyUI的场景下这不是个问题) | 图灵完备，即时用最简单的节点都能整个循环出来        |
| 节点偶现内容未被更新的bug                                    | 更简单高效的通信和执行机制，易于扩展且更不容易出bug |
| 注释全靠分组                                                 | 支持录制，录出来的东西可以直接放ProxyOS项目里当教材 |
| 禁用节点的功能并不直观，<br/>而且会让用户困惑“禁用ABC中的B后，是跳过B执行C还是C直接不被执行” | 禁用的是边而非节点                                  |

其中最后一条就是本期新增的，通过禁用/启用少数几条边，就能轻易切换不同的运行流程

## 切换到第二章

因为之前从全屏仿Windows界面切换成了一个客户端窗口，之前的过渡脚本不能用了。

反正要重写，索性就趁这个机会把整体架构优化了下，不再有单独的一个第一章场景了，而是让统一的场景加载第一章的controller。

然后启动时的Terminal动画脚本也顺带加上了。

现在像是个完整游戏了，我也能心无旁骛地在接下来的一周里尽力搞定第二章并发布demo给好兄弟帮忙测试了

# 瓶颈与问题清单

> 哪些问题还没解，但也许我已经知道“它们不是什么”？

# 下期计划（Next）

本期加班了一天，以至于本期完全没休息……下期额外休一天

- [ ] 写个玩家操作手册过一下第二章的代码能力
- [ ] 尽量补全相关功能

# 试玩版

预计第一个可玩版本将在第二章的第一个涉及外部编程的游戏内容完成后推出