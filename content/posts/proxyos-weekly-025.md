+++
date = '2026-01-21T10:58:00+08:00'
draft = false
title = 'Proxyos Weekly 025'
slug = 'proxyos-weekly-025'
series = ['proxyos-weekly']
categories = ['ProxyOS', 'DevLog']
tags = ['ProxyOS', '周报', '独立游戏开发', '技术日志']

+++

> TL;DR 概览
>
> 真是充实的一天呢，一堆优化和 bug 修复。至于测试进度……显然测出了很多问题

{{< toc >}}

# 本期目标

- [ ] 完成第一章测试
  - [x] 第五节
  - [ ] 第六节
  - [ ] 过渡到第二章
- [x] 修 ANORA
  - [x] 单步调试功能需要做对应调整
  - [x] 似乎有个偶现的无法重复录制的问题
  - [x] 添加边选中逻辑
  - [x] 多选拖动功能表现异常

# 进展速记（Changelog）

## 本期假设 / 预期

> 我当时以为世界是怎样的？
> 这个预期中，哪一条被证伪 / 被削弱 / 被确认？

- 够呛能干完
  - 确实没干完


## 本期确定性变化

> 哪些东西现在「更确定」或「被明确否定」了？
> “确认 X 不可行”
> “删掉 Y 抽象”
> “意识到 Z 是伪问题”

### 新增：

- ANORA 添加节点 resize 功能
- ANORA 为边的选中添加视觉反馈
- ANORA 优化边的样式，便于区分数据方向

### 变更：

- ANORA 单步调试时会忽略延迟（毕竟用户已经在手动控制什么时候执行下一个了）
- ANORA 增加节点的最小尺寸，避免过度缩小
- ANORA 优化状态管理，使用事件维护状态，使数据流动方式更统一
- 基本重构了 Middleware 机制，同时也和 UTF8StreamDecoder 一起作为独立模块分离出了 Terminal，整体职责更清晰，性能也得到了些许提升
- UTF8StreamDecoder 会先检查末尾三字节，避免因为让 godot 的 get_string_from_utf8 直接解析出现错误提示
- ANORA 优化事件管理，现在更不容易漏改东西了

### 修复：

- ANORA 单步状态未被正常同步
- ANORA 在步进执行过程中再次步进导致状态异常
- ANORA 因为节点添加 resizer 时打破了单根节点组件的规律，事件被绑到了不该绑的地方
- ANORA 导出录制结果时没有重置状态，导致UI 仍然显示录制中的状态，但实际上没有录制器在工作，以至于再次点击导出时无法正常导出
- ANORA 多选节点拖放时，只有一个节点的位置正常更新
- ANORA 分配器内部状态更新异常导致无法接受新输入且始终输出同一个值
- Terminal 的 Middleware 机制存在问题，BetterProcess 在某些情况下会将一次 `print(..., flush=True)` 的内容分成两次返回，导致 Niddleware 的 marker 被截到两次输出里，进而导致 Middleware 未正确处理标记

### 删除：

- 

# 主要进展内容/本期关键判断点

> 我做出了哪些「如果错了也要付代价」的判断？

今天修了一堆 bug，修不动了，下期继续修

# 瓶颈与问题清单

> 哪些问题还没解，但也许我已经知道“它们不是什么”？

# 下期计划（Next）

- [ ] 修好剩下的 bug
  - [ ] 需要有一个机制来等 ANORA 的 IPC 加载后再跑 IPC，否则启动 ANORA后立刻用 IPC 加载回放会因 ANORA IPC 未加载而被忽略

- [ ] 完成第一章测试
  - [ ] 第六节
  - [ ] 过渡到第二章

# 试玩版

预计第一个可玩版本将在第二章的第一个涉及外部编程的游戏内容完成后推出
